[![Mastodon: @phranck](https://img.shields.io/badge/Mastodon-@LAYERED-6364ff.svg?style=flat)](https://oldbytes.space/@LAYERED)
![SF Symbols](https://img.shields.io/badge/SF%20Symbols-7007-blue?style=flat&logo=apple&logoColor=white)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

# sfe - SF Symbols Extractor

A Python tool to extract individual SVG files from concatenated `svgs.txt` files.

Current version: **[SF Symbols 7.2](https://developer.apple.com/sf-symbols/)**

## Usage in Projects

The extracted SVG files are used directly by [sf-symbols-lib](https://github.com/phranck/sf-symbols-lib).

## Directory Structure

```
sfe/
├── sfe                     # Extractor script
├── .data/
│   ├── names.txt           # Symbol names (one per line)
│   ├── info.txt            # Restricted symbols (one per line)
│   ├── categories/         # Category mappings
│   │   ├── Arrows.txt
│   │   ├── Commerce.txt
│   │   └── ...
│   ├── monochrome/         # Monochrome variant
│   │   └── svgs.txt
│   └── hierarchical/       # Hierarchical variant
│       └── svgs.txt
└── (extracted SVGs)        # Generated by sfe command
    ├── monochrome/
    │   ├── square.and.arrow.up.svg
    │   └── ...
    └── hierarchical/
        ├── square.and.arrow.up.svg
        └── ...
```

## Symbol Variants

The directories are organized by SF Symbol rendering variants:

**Variants:**
- `monochrome/` - Monochrome
- `hierarchical/` - Hierarchical

## Installation

Install `sfe` globally on your system using Homebrew, pipx, or pip:

### Using Homebrew (Recommended)

```bash
brew install phranck/tap/sfe
```

### Using pipx

```bash
# Install pipx if not already installed
brew install pipx

# Install sfe from source directory
pipx install .

# Or install in editable mode (changes reflect immediately)
pipx install -e .
```

### Using pip with virtual environment

```bash
# Install from source directory
pip install .

# Or install in development mode (changes reflect immediately)
pip install -e .
```

After installation, the `sfe` command is available globally in your terminal.

### Uninstall

```bash
# If installed with Homebrew
brew uninstall sfe

# If installed with pipx
pipx uninstall sfe

# If installed with pip
pip uninstall sfe
```

## Usage

```bash
# Check directory structure
sfe --check

# Update SF Symbols badge in README
sfe --update-badge

# Extract SVGs to custom directory (preserves directory structure)
sfe --output ~/Desktop/SVGs

# Delete all extracted SVGs (current directory)
sfe --clean

# Delete all extracted SVGs (custom directory)
sfe --clean ~/Desktop/SVGs

# Extract all SVGs
sfe
```

The script extracts individual `.svg` files from each `svgs.txt` into their respective directories.

## Output Format

Each extracted SVG file contains embedded metadata in standard SVG `<metadata>` tags. This makes every SVG self-describing without requiring external lookup files.

### Metadata Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" ...>
  <metadata>
    <symbol>
      <name type="apple">square.and.arrow.up</name>
      <name type="lib">SFSquareAndArrowUp</name>
      <restricted>false</restricted>
      <categories>
        <category>Draw</category>
        <category>Navigation</category>
      </categories>
    </symbol>
  </metadata>
  <!-- SVG content -->
</svg>
```

### Metadata Fields

| Field | Description | Example |
|-------|-------------|---------|
| `<name type="apple">` | Original Apple symbol name | `square.and.arrow.up` |
| `<name type="lib">` | SF Symbols Lib compatible name (PascalCase with `SF` prefix) | `SFSquareAndArrowUp` |
| `<restricted>` | Whether symbol has Apple usage restrictions | `true` or `false` |
| `<categories>` | Apple SF Symbols app categories (alphabetically sorted, optional) | `<category>Draw</category>` |

### Name Conversion Rules

The library name is generated from the Apple symbol name using PascalCase:

- Split by `.` delimiter
- Capitalize first letter of each word
- Join without delimiters
- Add `SF` prefix

**Examples:**
- `square.and.arrow.up` → `SFSquareAndArrowUp`
- `1.circle` → `SF1Circle`
- `wifi.router` → `SFWifiRouter`

### Restricted Symbols

Symbols marked as `<restricted>true</restricted>` have usage restrictions defined by Apple. These symbols should only be used for their intended system-level purposes. See Apple's SF Symbols documentation for details on proper usage.

### Categories

Symbols can belong to multiple categories as defined in Apple's SF Symbols app. Categories are always listed in alphabetical order. If a symbol has no categories, the `<categories>` element is omitted.

## Note

The extracted `.svg` files are excluded from version control (see `.gitignore`). After cloning the repository, install it with `pip install .` and then run `sfe` to generate the SVG files.

## Contributing

Reports and pull requests are welcome. Please use the GitHub issue tracker for bug reports or feature requests.

## License

This repository has been published under the [MIT](https://opensource.org/licenses/MIT) license.
